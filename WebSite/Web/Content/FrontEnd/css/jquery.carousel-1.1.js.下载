(function(b){var a=function(aL,aH){var aF=b.extend({},b.fn.carousel.defaults,aH),ad=this,aL=b(aL),i=aL.children(".slides");i.children("li").addClass("slideItem");var aD=i.children(".slideItem"),ar=aD.find("img"),at=0,aq=0,av=aD.length,au=false,c=true;videos={youtube:{reg:/youtube\.com\/watch/i,split:"=",index:1,url:"http://www.youtube.com/embed/%id%?autoplay=1&amp;fs=1&amp;rel=0"},vimeo:{reg:/vimeo\.com/i,split:"/",index:3,url:"http://player.vimeo.com/video/%id%?portrait=0&amp;autoplay=1"}};this.current=at;this.length=av;this.init=function(){var g=aF;ak();if(g.directionNav==true){s()}if(g.reflection==true){ac()}if(g.shadow==true){w()}if(g.description==true){p()}if(g.autoplay==true){aG()}f()};var aC=function(q){var r=aF,u=av,k=r.frontWidth,m=r.frontHeight,l;if(q!=0){if(r.hAlign=="center"){if(q>0&&q<=Math.ceil((u-1)/2)){var j=aC(q-1);k=r.backZoom*j.width;m=r.backZoom*j.height}else{var g=aC(u-q);k=g.width;m=g.height}}else{var j=aC(q-1);k=r.backZoom*j.width;m=r.backZoom*j.height}}return l={width:k,height:m}};var aB=function(q){var r=aF,u=av,k=r.frontWidth,m=r.frontHeight+ae(q)+aa(q),l;if(q!=0){if(r.hAlign=="center"){if(q>0&&q<=Math.ceil((u-1)/2)){var j=aC(q-1);k=r.backZoom*j.width;m=(r.backZoom*j.height)+ae(q)+aa(q)}else{var g=aB(u-q);k=g.width;m=g.height}}else{var j=aC(q-1);k=r.backZoom*j.width;m=(r.backZoom*j.height)+ae(q)+aa(q)}}return l={width:k,height:m}};var aA=function(k){var l=aF,j,q,g,m=aC(k);j=m.height*l.vMargin;q=m.width*l.hMargin;return g={vMargin:j,hMargin:q}};var az=function(g){var j=aF,k=ay(g-1)+(aC(g-1).height-aC(g).height)/2;if(j.hAlign!="center"){if(g==(av-1)){k=j.top-((aC(g).height-aC(0).height)/2)}}return k};var ay=function(k){var l=aF,g=l.top,j=aA(k).vMargin;if(l.vAlign=="bottom"){g=l.bottom}if(k!=0){if(l.hAlign=="center"){if(k>0&&k<=Math.ceil((av-1)/2)){if(l.vAlign=="center"){g=az(k)}else{g=az(k)+j}}else{g=ay(av-k)}}else{if(k==(av-1)){if(l.vAlign=="center"){g=az(k)}else{g=az(k)-j}}else{if(l.vAlign=="center"){g=az(k)}else{g=az(k)+j}}}}return g};var ax=function(l){var m=aF,r=av,g,k=r%2,j=r/2,q=aA(l).hMargin;if(l==0){if(m.hAlign=="center"){g=(m.carouselWidth-m.frontWidth)/2}else{g=m.left;if(m.hAlign=="right"){g=m.right}}}else{if(m.hAlign=="center"){if(l>0&&l<=Math.ceil((r-1)/2)){g=ax(l-1)-q;if(k==0){if(l==j){g=(m.carouselWidth-aB(l).width)/2}}}else{g=m.carouselWidth-ax(r-l)-aB(l).width}}else{g=ax(l-1)+(aB(l-1).width-aB(l).width)/2+q}}return g};var aw=function(g){var j=aF,k=av,u=1,v=k-j.slidesPerScroll;if(v<2){v=2}if(j.hAlign=="center"){var r=(k-1)/2,l=v/2,q=(r+1)-l,m=r+l;if(g==0){u=1}else{u=j.backOpacity;if(g==q||g==m){u=0.8}else{if(g>q||g<m){u=0.9}}}}else{if(g==0){u=1}else{u=j.backOpacity;if(!(g<(k-v))){u=0}}}return u};var ap=function(l){var j=new Array(),m=aF,q=av;for(var k=0;k<q;k++){var g=aB(k);if(m.hAlign=="left"){j[k]={width:g.width,height:g.height,top:ay(k),left:(ax(k))/2,opacity:aw(k)};if(m.vAlign=="bottom"){j[k]={width:g.width,height:g.height,bottom:ay(k),left:ax(k),opacity:aw(k)}}}else{j[k]={width:g.width,height:g.height,top:ay(k),right:ax(k),opacity:aw(k)};if(m.vAlign=="bottom"){j[k]={width:g.width,height:g.height,bottom:ay(k),right:ax(k),opacity:aw(k)}}}}return j[l]};var ao=function(j){var g=at,k=j-g;if(j<g){k+=av}return k};var an=function(j){var k,l=av,g=aF.hAlign;if(g=="left"||g=="right"){k=l-(1+j)}else{if(j>=0&&j<=((l-1)/2)){k=(l-1)-j}else{k=j-1}}return k};var am=function(g){var j=aF;if(j.autoplay==true&&j.pauseOnHover==true){aE()}};var al=function(g){var j=aF;if(j.autoplay==true&&j.pauseOnHover==true){if(c==true){aG()}}};var ak=function(){var q=aF,u=av,g=ar;i.css({"width":q.carouselWidth+"px","height":q.carouselHeight+"px"}).bind("mouseover",am).bind("mouseout",al);for(var j=0;j<u;j++){var r=aD.eq(j);var m={};for(var l in ap(ao(j))){if(l!="opacity"){m[l]=ap(ao(j))[l]}}r.css(m).bind("click",af);r.find(".cover").css({"opacity":1-ap(ao(j)).opacity});aD.eq(ao(j)).css({"z-index":an(j)});g.eq(j).css(aC(ao(j)));var k=r.css("opacity");if(k==0){r.hide()}else{r.show()}}};var aj=function(j){var g=j.css("opacity");if(g==0){j.hide()}};var ai=function(j,g,m){if(au==true){return}var k=aF,l=av;if(g==true){aE()}aq=j;if(aq==l){aq=0}if(aq==-1){aq=l-1}k.before(ad);ah();c=m};var ah=function(){var l=aF,m=av;if(au==true){return}if(at==aq){au=false;return}au=true;o(at);if(at>aq){var g=m-at+aq,k=at-aq}else{var g=aq-at,k=at+m-aq}if(g>k){dir=-1}else{dir=1}at+=dir;if(at==m){at=0}if(at==-1){at=m-1}d();n(at);for(var j=0;j<m;j++){ag(j)}};var ag=function(k){var m=aF,l=aD.eq(k),q=ao(k);var j={};for(var g in ap(q)){if(g!="opacity"){j[g]=ap(q)[g]}}l.show();l.animate(j,m.speed,"linear",function(){aj(b(this));if(k==av-1){au=false;if(at!=aq){ah()}else{ad.current=at;e(at);m.after(ad)}}});l.css({"z-index":an(q)});ar.eq(k).animate(aC(q),m.speed,"linear");l.find(".cover").eq(k).animate(aC(q),m.speed,"linear");l.find(".cover").animate({"opacity":1-ap(ao(k)).opacity});if(m.reflection==true){ab(m,l,k)}if(m.shadow==true){t(m,l,k)}};var af=function(j){var g=b(this);if(g.index()!=at){ai(g.index(),true,false);return false}};var ae=function(j){var g=0,k=aF;
    if(k.reflection==true){g=k.reflectionHeight*aC(j).height}g=0;return g};var ac=function(){var j=aF,q=aD,u=ar,k=av,y=j.reflectionOpacity,g="rgba("+j.reflectionColor+","+y+")",l="rgba("+j.reflectionColor+",1)";var x='<style type="text/css">';x+=".slideItem .gradient {";x+="position:absolute; left:0; top:0; margin:0; padding:0; border:none; width:100%; height:100%; ";x+="background: -moz-linear-gradient("+g+","+l+"); ";x+="background: -o-linear-gradient("+g+","+l+"); ";x+="background: -webkit-linear-gradient("+g+","+l+"); ";x+="background: -webkit-gradient(linear, 0% 0%, 0% 100%, from("+g+"), to("+l+")); ";x+="background: linear-gradient("+g+","+l+"); ";x+="} ";x+=".slideItem .reflection {";x+="filter: progid:DXImageTransform.Microsoft.Alpha(style=1,opacity="+(y*100)+",finishOpacity=0,startX=0,finishX=0,startY=0,finishY=100)";x+="-ms-filter: progid:DXImageTransform.Microsoft.Alpha(style=1,opacity="+(y*100)+",finishOpacity=0,startX=0,finishX=0,startY=0,finishY=100)";x+="}";x+="</style>";b(x).appendTo("head");for(var m=0;m<k;m++){var v=u.eq(m).attr("src"),r=aC(m);b('<div class="reflection"></div>').css({"position":"absolute","margin":"0","padding":"0","border":"none","overflow":"hidden","left":"0","top":aC(m).height+"px","width":"100%","height":ae(m)}).appendTo(q.eq(m)).append(b('<img src="'+v+'" />').css({"width":r.width+"px","height":r.height+"px","left":"0","margin":"0","padding":"0","border":"none","-moz-transform":"rotate(180deg) scale(-1,1)","-webkit-transform":"rotate(180deg) scale(-1,1)","-o-transform":"rotate(180deg) scale(-1,1)","transform":"rotate(180deg) scale(-1,1)","filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"})).append('<div class="gradient"></div>')}};var ab=function(j,g,k){var q=g.children(".reflection"),l=j.speed,m=aC(ao(k));q.animate({"top":m.height+"px","height":ae(ao(k))},l,"linear");q.children("img").animate(m,l,"linear")};var aa=function(j){var g=0;if(aF.shadow==true){g=0.1*aC(j).height}g=0;return g};var z=function(l){var g,k=aD.eq(l).find(".shadow"),q=k.children(".shadowLeft"),j=k.children(".shadowRight"),m=k.children(".shadowMiddle");return g=aC(l).width-(q.width()+j.width())};var w=function(){var j=aD,q=av,m=aC(0).width,l='<div class="shadowLeft"></div><div class="shadowMiddle"></div><div class="shadowRight"></div>';if(aF.hAlign!="center"){m=aC(q-1).width}for(var k=0;k<q;k++){var g=j.eq(k);b('<div class="shadow"></div>').css({"width":m+"px","z-index":"-1","position":"absolute","margin":"0","padding":"0","border":"none","overflow":"hidden","left":"0","bottom":"0"}).append(l).appendTo(g).children("div").css({"position":"relative","float":"left"});g.find(".shadow").children(".shadowMiddle").width(z(k))}};var t=function(j,g,k){g.find(".shadow").children(".shadowMiddle").animate({"width":z(ao(k))+"px"},j.speed,"linear")};var s=function(){var g=aL;g.append('<div class="next"></div><div class="prev"></div>');g.children(".next").bind("click",function(j){ai(at+1,true,false)});g.children(".prev").bind("click",function(j){ai(at-1,true,false)})};var p=function(){var j=b(aF.descriptionContainer),g=j.width(),l=j.height(),m=j.children("div"),q=m.length;for(var k=0;k<q;k++){m.eq(k).css({"position":"absolute","top":"0","left":"0"})}m.eq(0).show()};var o=function(j){var k=aF;if(k.description==true){var g=b(k.descriptionContainer);g.children("div").eq(j).hide()}};var n=function(j){var k=aF;if(k.description==true){var g=b(k.descriptionContainer);g.children("div").eq(j).show()}};var h=function(){var g=aC(0);b('<div class="spinner"></div>').hide().css(ap(0)).css({"width":g.width+"px","height":g.height+"px","z-index":av+3,"position":"absolute","cursor":"pointer","overflow":"hidden","padding":"0","margin":"0","border":"none"}).appendTo(i)};var f=function(){h();var g=aC(0);b('<div class="videoOverlay"></div>').hide().css(ap(0)).css({"width":g.width+"px","height":g.height+"px","z-index":av+2,"position":"absolute","cursor":"pointer","overflow":"hidden","padding":"0","margin":"0","border":"none"}).bind("click",aJ).appendTo(i);e(at)};var e=function(g){if(aD.eq(g).children("a").hasClass("video")){i.children(".videoOverlay").show()}};var d=function(){var g=i;g.children(".videoOverlay").hide().children().remove();g.children(".spinner").hide()};var aM=function(g){var k=videos,j;b.each(k,function(m,q){if(g.match(q.reg)){var l=g.split(q.split)[q.index].split("?")[0].split("&")[0];j=q.url.replace("%id%",l)}});return j};var aK=function(){var g=i.children(".videoOverlay"),j=aD.eq(at).children("a").attr("href"),k=aM(j);b("<iframe></iframe>").attr({"width":g.width()+"px","height":g.height()+"px","src":k,"frameborder":"0"}).bind("load",aI).appendTo(g)};var aJ=function(g){aK();i.children(".spinner").show();b(this).hide();if(aF.autoplay==true){aE();c=false}};var aI=function(j){var g=i;g.children(".videoOverlay").show();g.children(".spinner").hide()};var aG=function(){intervalProcess=setInterval(function(){ai(at+1,false,true)
},aF.autoplayInterval)};var aE=function(){if(aF.autoplay==true){clearInterval(intervalProcess);return}};this.prev=function(){ai(at-1,true,false)};this.next=function(){ai(at+1,true,false)};this.goTo=function(g){ai(g,true,false)};this.pause=function(){aE();c=false};this.resume=function(){if(aF.autoplay==true){aG()}}};b.fn.carousel=function(d){var c=[];for(var e=0;e<this.length;e++){if(!this[e].carousel){this[e].carousel=new a(this[e],d);this[e].carousel.init()}c.push(this[e].carousel)}return c.length>1?c:c[0]};b.fn.carousel.defaults={hAlign:"center",vAlign:"center",hMargin:0.8,vMargin:0.2,frontWidth:400,frontHeight:300,carouselWidth:1000,carouselHeight:360,left:0,right:0,top:0,bottom:0,backZoom:0.8,slidesPerScroll:5,speed:500,directionNav:false,autoplay:true,autoplayInterval:5000,pauseOnHover:true,mouse:true,shadow:false,reflection:false,reflectionHeight:0.2,reflectionOpacity:0.5,reflectionColor:"255,255,255",description:false,descriptionContainer:".description",backOpacity:1,before:function(c){},after:function(c){}}})(jQuery);